<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday Zubeesha</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Handwriting Font -->
<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">

<style>
/* BASIC STYLING */
body {
    margin: 0;
    background: #ffd6f4;
    font-family: "Itim", cursive;
    text-align: center;
    overflow-x: hidden;
    cursor: none;
}

/* TYPING INTRO */
#typingIntro {
    font-size: 38px;
    color: #ff2e8f;
    margin-top: 40px;
    white-space: pre-wrap;
    border-right: 3px solid #ff2e8f;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
    overflow: hidden;
}

/* BUTTON */
button {
    background: #ff56a7;
    color: white;
    border: none;
    padding: 15px 35px;
    border-radius: 40px;
    font-size: 22px;
    cursor: pointer;
    animation: glow 1.5s infinite alternate;
}
@keyframes glow {
    from { box-shadow: 0 0 5px #ff8ecf; }
    to { box-shadow: 0 0 20px #ff2e8f; }
}

/* ENVELOPE */
#letterContainer {
    display: none;
    margin-top: 30px;
}

#envelope {
    width: 260px;
    height: 180px;
    margin: auto;
    background: pink;
    border-radius: 10px;
    position: relative;
    cursor: pointer;
    box-shadow: 0 0 15px #ff9ecb;
}

#envelope:before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    border-left: 130px solid transparent;
    border-right: 130px solid transparent;
    border-bottom: 90px solid #ff9ecb;
}

#letter {
    display: none;
    width: 240px;
    background: white;
    margin: auto;
    padding: 15px;
    border-radius: 10px;
    color: #ff2e8f;
    font-size: 18px;
}

/* CAKE */
#cakeArea {
    display: none;
    margin-top: 20px;
}

#cakeCanvas {
    background: #fff;
    border-radius: 20px;
}

/* SLIDESHOW */
#slideshow {
    display: none;
    margin-top: 20px;
}
.slideImg {
    width: 90%;
    border-radius: 20px;
    box-shadow: 0 0 12px pink;
}

/* POPUP */
#popup {
    display:none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.7);
    color:white;
    font-size:40px;
    justify-content:center;
    align-items:center;
    z-index:999;
}

/* SPARKLE CURSOR */
.cursor-sparkle {
    position: fixed;
    width: 10px;
    height: 10px;
    background: hotpink;
    border-radius: 50%;
    pointer-events: none;
    animation: sparkle 0.5s ease-out;
}
@keyframes sparkle {
    from { transform: scale(1); opacity: 1; }
    to   { transform: scale(3); opacity: 0; }
}

/* FLOATING HEARTS */
.heart {
    position: fixed;
    font-size: 24px;
    color: pink;
    animation: floatUp 4s linear infinite;
}
@keyframes floatUp {
    0% { transform: translateY(0) scale(1);}
    100% { transform: translateY(-800px) scale(1.5);}
}

/* CONFETTI */
.confetti-piece {
    position: fixed;
    width: 10px; height: 10px;
    background: #ff69b4;
    opacity: 0.8;
    animation: confettiFall 3s linear infinite;
}
@keyframes confettiFall {
    0% { transform: translateY(-10px) rotate(0deg);}
    100% { transform: translateY(800px) rotate(360deg);}
}

/* BALLOONS */
.balloon {
    position: fixed;
    width: 40px;
    height: 60px;
    background: pink;
    border-radius: 50%;
    animation: fly 8s linear infinite;
}
@keyframes fly {
    0% { transform: translateY(800px) translateX(0);}
    100% { transform: translateY(-200px) translateX(100px);}
}
</style>
</head>
<body>

<!-- MUSIC -->
<audio autoplay loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4a2e0a73fd.mp3?filename=happy-birthday-109499.mp3">
</audio>

<!-- TYPING INTRO -->
<div id="typingIntro"></div>
<button id="startBtn" onclick="showEnvelope()">Continue ðŸŽ€</button>

<!-- ENVELOPE -->
<div id="letterContainer">
    <div id="envelope" onclick="openLetter()"></div>
    <div id="letter">
        Dear Zubeesha ðŸ’—,<br><br>
        You are special, annoying & intelligent.<br>
        Today is all about YOU!<br><br>
        ðŸ’• Happy Birthday Princess ðŸ’•
    </div>
</div>

<!-- CAKE -->
<div id="cakeArea">
    <canvas id="cakeCanvas" width="350" height="350"></canvas>
</div>
<button id="cakeBtn" style="display:none;" onclick="nextStep()">Let's Cut The Cake ðŸŽ€</button>

<!-- POPUP -->
<div id="popup">ðŸŽ‰ Happy Birthday Zubeesha ðŸŽ‰</div>

<!-- SLIDESHOW -->
<div id="slideshow">
    <img id="slideImg" class="slideImg" src="1.jpg">
</div>

<script>
/* TYPING INTRO */
let intro = "Happy Birthday\nAnnoying & Intelligent\nZubeesha ðŸŽ€";
let idx = 0;
function type() {
    if (idx < intro.length) {
        document.getElementById("typingIntro").textContent += intro.charAt(idx);
        idx++;
        setTimeout(type, 80);
    }
}
type();

/* SHOW ENVELOPE */
function showEnvelope() {
    document.getElementById("startBtn").style.display = "none";
    document.getElementById("letterContainer").style.display = "block";
}

/* OPEN LETTER */
function openLetter() {
    document.getElementById("letter").style.display = "block";

    setTimeout(() => {
        document.getElementById("letterContainer").style.display = "none";
        document.getElementById("cakeArea").style.display = "block";
        document.getElementById("cakeBtn").style.display = "block";
        drawCake();
    }, 2000);
}

/* CAKE LOGIC */
let flame = true;
let step = 0;
let canvas, ctx;

function drawCake() {
    canvas = document.getElementById("cakeCanvas");
    ctx = canvas.getContext("2d");
    ctx.clearRect(0,0,350,350);

    ctx.fillStyle="#ff9ecb"; ctx.fillRect(60,160,230,140);
    ctx.fillStyle="#ff65b3"; ctx.fillRect(60,130,230,40);

    ctx.fillStyle="white"; ctx.fillRect(170,50,20,80);

    if (flame) {
        ctx.beginPath();
        ctx.arc(180,40,12,0,7);
        ctx.fillStyle="yellow";
        ctx.fill();
    }
}

function nextStep() {
    step++;
    if(step===1){
        document.getElementById("cakeBtn").innerText="Light Candle";
    } else if(step===2){
        flame=true; drawCake();
        document.getElementById("cakeBtn").innerText="Blow Candle";
    } else if(step===3){
        flame=false; drawCake();
        document.getElementById("cakeBtn").innerText="Cut The Cake ðŸ°";
    } else if(step===4){
        enableCutting();
        document.getElementById("cakeBtn").style.display="none";
    }
}

/* CUTTING CAKE */
let cutting = false;
function enableCutting(){
    canvas.addEventListener("touchstart",()=>cutting=true);
    canvas.addEventListener("touchend",finishCut);
    canvas.addEventListener("touchmove",e=>{
        if(!cutting) return;
        let r=canvas.getBoundingClientRect();
        let x=e.touches[0].clientX-r.left;
        let y=e.touches[0].clientY-r.top;
        ctx.strokeStyle="white"; ctx.lineWidth=12;
        ctx.lineTo(x,y); ctx.stroke();
    });
}

/* AFTER CUTTING POPUP + SLIDESHOW */
function finishCut(){
    cutting=false;
    showPopup();
}
function showPopup(){
    document.getElementById("popup").style.display="flex";

    setTimeout(()=>{
        document.getElementById("popup").style.display="none";
        startSlideshow();
    },3000);
}

/* SLIDESHOW */
let slide = 1;
function startSlideshow(){
    document.getElementById("slideshow").style.display="block";
    setInterval(()=>{
        slide++;
        if(slide>4) slide=1;
        document.getElementById("slideImg").src = slide + ".jpg";
    },2500);
}

/* GLITTER CURSOR */
document.addEventListener("mousemove",e=>sparkle(e.clientX,e.clientY));
document.addEventListener("touchmove",e=>{
    let t=e.touches[0];
    sparkle(t.clientX,t.clientY);
});
function sparkle(x,y){
    let d=document.createElement("div");
    d.className="cursor-sparkle";
    d.style.left=x+"px";
    d.style.top=y+"px";
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),400);
}

/* FLOATING HEARTS */
function createHearts(){
    setInterval(()=>{
        let h=document.createElement("div");
        h.className="heart";
        h.style.left=Math.random()*window.innerWidth+"px";
        h.style.fontSize=(12+Math.random()*18)+"px";
        h.textContent="ðŸ’–";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),4000);
    },500);
}
createHearts();

/* BALLOONS */
function createBalloons(){
    setInterval(()=>{
        let b=document.createElement("div");
        b.className="balloon";
        b.style.left=Math.random()*window.innerWidth+"px";
        document.body.appendChild(b);
        setTimeout(()=>b.remove(),8000);
    },1500);
}
createBalloons();

/* CONFETTI */
function createConfetti(){
    setInterval(()=>{
        let c=document.createElement("div");
        c.className="confetti-piece";
        c.style.left=Math.random()*window.innerWidth+"px";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),3000);
    },200);
}
createConfetti();
</script>

</body>
</html>
